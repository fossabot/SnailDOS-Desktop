<html>
    <head>
        <script>
            window.jQuery = window.$ = require('jquery');
            const { ipcRenderer } = require('electron');
        </script>
        <link rel="stylesheet" href="pad/numpad-dark.css"/>
        <script src="pad/numpad.js"></script>
        <link rel="stylesheet" href="https://www.w3schools.com/w3css/4/w3.css">
        <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
        <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css" integrity="sha384-JcKb8q3iqJ61gNV9KGb8thSsNjpSL0n8PARn9HuZOnIxN0hoP+VmmDGMN5t9UJ0Z" crossorigin="anonymous">
        <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js" integrity="sha384-B4gt1jrGC7Jh4AgTPSdUtOBvfO8shuf57BaghqFfPlYxofvL8/KUEfYiJOMMV+rV" crossorigin="anonymous"></script>
        <title>SnailPortal - Encrypt</title>
               <script>
        $(document).ready(function () {
            $(".divs div").each(function (e) {
                if (e != 0)
                    $(this).hide();
            });

            $("#1").click(function () {
                if ($(".divs div:visible").next().length != 0)
                    $(".divs div:visible").next().show().prev().hide();
                else {
                    $(".divs div:visible").hide();
                    $(".divs div:first").show();
                }
                return false;
            });

            $("#2").click(function () {
                if ($(".divs div:visible").next().length != 0)
                    $(".divs div:visible").next().show().prev().hide();
                else {
                    $(".divs div:visible").hide();
                    $(".divs div:first").show();
                }
                return false;
            });

            $("#3").click(function () {
                if ($(".divs div:visible").next().length != 0)
                    $(".divs div:visible").next().show().prev().hide();
                else {
                    $(".divs div:visible").hide();
                    $(".divs div:first").show();
                }
                return false;
            });

            $("#prev").click(function () {
                if ($(".divs div:visible").prev().length != 0)
                    $(".divs div:visible").prev().show().next().hide();
                else {
                    $(".divs div:visible").hide();
                    $(".divs div:last").show();
                }
                return false;
            });
        });

    </script>
        <style>
        main  {
            font-size: 50px;
        }
        body {
            background-color: #000000;
            user-select: none; /* supported by Chrome and Opera */
   -webkit-user-select: none; /* Safari */
   -khtml-user-select: none; /* Konqueror HTML */
   -moz-user-select: none; /* Firefox */
   -ms-user-select: none; /* Internet Explorer/Edge */
        }

        .hidden  {
            opacity: 0.0;
        }

        h1,h2,h3,h4,h5,h6,a,button  {
            color: white;
            
        }
        .ctrl {
            color: white;
            font-size: 35px;
        }
        </style>
        <Script>
            function store3()  {
const Store = require('electron-store');
var pass123 = $('#passbox').val();
console.log('Encryption start!')
var pin = new Store({
    name: "pin",
    encryptionKey: pass123
})
pin.set('isencrypted', 'true')
pin.set('pin', pass123)
$(".divs div:visible").next().length != 0
$(".divs div:visible").next().show().prev().hide()
const security = new Store()
security.set('pin', 'true')
console.log('Enc complete.')
            }
        </script>
        <script>
            function complete(){
                ipcRenderer.send('relaunch');
            }
        </script>
    </head>
    <body>
        <div class="divs">
            <center>
            <div class="cls1"><h2 class="main" class="w3-center">Welcome to the interactive encrypter<p><p><button id="1" class="ctrl w3-center w3-light-blue w3-center">Next!</button><h2 class="hidden">h</h2></p></h2></div>
            <div class="cls2"><h2 class="main" class="w3-center">Any password typed in here, will create a new local database and encrypt it. Forgetting your pin = loosing everything.<p><button id="2" class="ctrl w3-center w3-light-blue w3-center">AGREE!</button><h2 class="hidden">h</h2></p></h2> <p></div>
            <div class="cls3"><h4 class="main" class="w3-center"><h2 class="w3-center">Enter a pin:</h2>
                <p>
                    <h2 class="w3-center">Press the "Start Encryption!" button when completed..</h2>
                </p>
                <p>

                </p><form class="w3-center" onsubmit="store3(); return false;"> 
                <input class="passbox" id="passbox" name="passbox" type="password" id="passbox" required="true" placeholder="" />
                <p>
                    <h1 class="invisible">h</h1>
                    <button class="w3-button w3-white w3-round" onclick="store3()">Start Encryption!</button>
                </p>
                </form></h4><h2 class="hidden">h</h2></div>
            <div class="cls4"><h4 class="main" class="w3-center">Finished.<p></p> <button class="w3-button w3-blue-gray w3-center" onClick="complete()">Relaunch</button></h4></div>
        </div>
        <script>
            window.addEventListener("load", function(){
              // WITH OPTIONS
              numpad.attach({
                target: "passbox",
                max: 4,
                decimal: false
              });
            });
            </script>
        <div class="w3-center">
            
            <h1 class="hidden">h<p>h<p>h</p></h1>
        </div>
    </center>
    </body>
</html>
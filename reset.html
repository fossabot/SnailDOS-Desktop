<!DOCTYPE html>
<html>
<head>
    <link rel="stylesheet" href="https://www.w3schools.com/w3css/4/w3.css">
    <link rel="stylesheet" href="https://www.w3schools.com/w3css/4/w3.css">
    <meta charset='utf-8'>
    <meta http-equiv='X-UA-Compatible' content='IE=edge'>
    <title>SnailPortal Reset</title>
    <Script>
        const Store = require('electron-store');
        function resets()  {
const security = new Store()
security.get('pin')
console.log('auth39')

if (security.get('pin')) {
console.log("aaa")
security.set('pin', false);
alert("You have encryption enabled, You will need be redirected to a decrypt and drop page... Press OK to continue.")
localStorage.setItem("encdis", true);
window.location.href = "decandrm.html";

          } else {
            console.log("going to need to decrypt. :(")
            start()
          }
        }
    </script>
    <meta name='viewport' content='width=device-width, initial-scale=1'>
    <script>
            const { ipcRenderer } = require('electron');
        function sleep(ms) {
  return new Promise(resolve => setTimeout(resolve, ms));
}
        function cancel()  {
            window.location.href = "index.html";
        }

        async function start()  {
            document.write("Preparing...")
            console.log("Confirm we are not encrypted please!")
            document.write("Loading...")
            document.write("Loading...")
            document.write("Loading...")
            document.write("Loading...")
            document.write("Loading...")
            document.write("Loading...")
            document.write("Loading...")
            document.write("Loading...")
            document.write("Loading...")
            document.write("Loading...")
            document.write("Loading...")
            document.write("Loading...")
            document.write("Loading...")
            await sleep(2000);
            document.open()
            document.write("Erasing setup data...")
            localStorage.removeItem("setup");
            localStorage.removeItem("greeter");
            const Store = require('electron-store');
            const security = new Store();
            security.clear()
            await sleep(2000);
            document.open()
            document.write("Erasing login info...")
            localStorage.removeItem("name");
            localStorage.removeItem("firstime");
            await sleep(2000);
            document.open()
            document.write("Reset Sucess... ")
            document.write("Please wait...")
            await sleep(2000);
            ipcRenderer.send('relaunch');
        }
    </script>
</head>
<body>
    <center>
    <h1 class="w3-center">Do you want to reset SnailPortal?</h1>
    <p></p>
    <button class="w3-button w3-black w3-center" onclick="resets();">Continue</button>
    <p></p>
    <button class="w3-button w3-black w3-center" onclick="cancel();">Cancel</button>
</center>
</html>
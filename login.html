<html>
    <head>
        <script>
            window.jQuery = window.$ = require('jquery');
            const { ipcRenderer } = require('electron');
        </script>
        <link rel="stylesheet" href="pad/numpad-dark.css"/>
        <link rel="stylesheet" href="./titlebar/titlebar.css">
        <script src="pad/numpad.js"></script>
        <link rel="stylesheet" href="https://cdn.snaildos.com/w3.css">
        <script src="https://cdn.snaildos.com/jquery.min.js"></script>
        <link href="https://cdn.snaildos.com/bootstrap.min.css">
        <script src="https://cdn.snaildos.com/bootstrap.min.js"></script>
        <title>SnailPortal - Login</title>
        <style>
        main  {
            font-size: 50px;
        }
        body {
             background-color: rgba(255,255,255,0.5) !important;
             background: transparent !important;
            user-select: none; /* supported by Chrome and Opera */
   -webkit-user-select: none; /* Safari */
   -khtml-user-select: none; /* Konqueror HTML */
   -moz-user-select: none; /* Firefox */
   -ms-user-select: none; /* Internet Explorer/Edge */
        }

        .hidden  {
            opacity: 0.0;
        }

        h1,h2,h3,h4,h5,h6,a,button  {
            color: white;
            
        }
        .ctrl {
            color: white;
            font-size: 35px;    
        }
        </style>
        <Script>
            const Store = require('electron-store');
            function store3()  {
var pass123 = $('#passbox').val();
console.log('Logging in...')
if (pass123 == 0) {
    console.log("0 Day Hack Detected")
    alert("You attempted to login with no password. Please enter the correct password.")
    window.location.replace("login.html");
    ipcRenderer.send('relaunch');
}
if (pass123 == 1) {
    console.log("0 Day Hack Detected")
    alert("Decode Error, error code is 13. Database problem...")
    window.location.replace("login.html");
    ipcRenderer.send('relaunch');
}
try {
    var pin = new Store({
    name: "pin",
    encryptionKey: pass123
})
} catch(error) {
alert("The pin entered is incorrect. Please, try again.")
}
if(pin.get('isencrypted')) {
  console.log("Is encrypted.")
} else {
  alert("The database is corrupted. We just recovered it.")
}
pin.set('isencrypted', 'true')
pin.set('pin', pass123)
$("#3").click()
console.log('Login complete.')
ipcRenderer.send('loginsucess');
            }
        </script>
        <script>
            function complete(){
                ipcRenderer.send('relaunch');
            }
        </script>
    </head>
    <body>
        <header data-for-os="windows" id="titlebar" class="titlebar">
            <div id="window-controls">
              <div onclick="ipcRenderer.send('minimize')" class="button" id="min-button"><img class="icon" srcset="./icons/titlebar/min-w-10.png 1x, ./icons/titlebar/min-w-12.png 1.25x, ./icons/titlebar/min-w-15.png 1.5x, ./icons/titlebar/min-w-15.png 1.75x, ./icons/titlebar/min-w-20.png 2x, ./icons/titlebar/min-w-20.png 2.25x, ./icons/titlebar/min-w-24.png 2.5x, ./icons/titlebar/min-w-30.png 3x, ./icons/titlebar/min-w-30.png 3.5x" draggable="false" /></div>
              <div onclick="ipcRenderer.send('close')" class="button" id="close-button"><img class="icon" srcset="./icons/titlebar/close-w-10.png 1x, ./icons/titlebar/close-w-12.png 1.25x, ./icons/titlebar/close-w-15.png 1.5x, ./icons/titlebar/close-w-15.png 1.75x, ./icons/titlebar/close-w-20.png 2x, ./icons/titlebar/close-w-20.png 2.25x, ./icons/titlebar/close-w-24.png 2.5x, ./icons/titlebar/close-w-30.png 3x, ./icons/titlebar/close-w-30.png 3.5x" draggable="false" /></div>
            </div>
          </header>
        <div class="divs">
            <center>
            <div class="cls3"><h4 class="main" class="w3-center"><h2 class="w3-center">Enter your pin:</h2>
                <h2>Click on the box to open the pin dialogue, then, enter your valid pin.</h2>
                <p>
                    <h2 class="w3-center">Press the "login" button when complete.</h2>
                </p>
                <p>

                </p><form class="w3-center" onsubmit="store3(); return false;"> 
                <input class="passbox" id="passbox" name="passbox" type="password" id="passbox" required="true" placeholder="" />
                <p>
                    <button class="w3-button w3-white w3-round" onclick="store3()">Login</button>
                </p>
        </div>
    </center>
    <script>
        window.addEventListener("load", function(){
          // WITH OPTIONS
          numpad.attach({
            target: "passbox",
            max: 4,
            decimal: false
          });
        });
        </script>
    </body>
</html>